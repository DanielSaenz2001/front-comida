<div class="container-page">
    <h2 class="text-center">COMPRAS</h2>

    <mat-card>
        <table 
            class="table-three-dots" 
            mat-table matSort 
            [dataSource]="data"
            *ngIf="data.length > 0">

                <ng-container matColumnDef="proveedor">
                    <th mat-header-cell *matHeaderCellDef>PROVEDOR</th>

                    <td mat-cell *matCellDef="let row">{{ row.proveedor }}</td>
                </ng-container>

                <ng-container matColumnDef="fecha">
                    <th mat-header-cell *matHeaderCellDef>FECHA</th>

                    <td mat-cell *matCellDef="let row">{{ row.fecha }}</td>
                </ng-container>

                <ng-container matColumnDef="empresa">
                    <th mat-header-cell *matHeaderCellDef>DESTINO</th>

                    <td mat-cell *matCellDef="let row">{{ row.empresa }} | {{ row.sucursal }} | {{ row.almacen }}</td>
                </ng-container>

                <ng-container matColumnDef="empleado">
                    <th mat-header-cell *matHeaderCellDef>EMPLEADO</th>

                    <td mat-cell *matCellDef="let row">{{ row.ap_paterno }} {{ row.ap_materno }} {{ row.nombres }}</td>
                </ng-container>

                <ng-container matColumnDef="total">
                    <th mat-header-cell *matHeaderCellDef>TOTAL</th>

                    <td mat-cell *matCellDef="let row">{{ row.total }}</td>
                </ng-container>

                <ng-container matColumnDef="estado">
                    <th mat-header-cell *matHeaderCellDef>ESTADO</th>

                    <td mat-cell *matCellDef="let row">{{ row.estado }}</td>
                </ng-container>

                <ng-container matColumnDef="actions">
                    <th mat-header-cell *matHeaderCellDef></th>

                    <td mat-cell *matCellDef="let row">
                        <button 
                            *ngIf="row.estado == 1"
                            mat-mini-fab 
                            color="white" 
                            class="mat-btn-actions mat-elevation-z2"
                            matTooltip="DETALLE"
                            [routerLink]="['detail', row.id]" routerLinkActive="router-link-active" >
                                <mat-icon>view_list</mat-icon>
                        </button>

                        <button 
                            *ngIf="row.estado == 0"
                            mat-mini-fab 
                            color="white" 
                            class="mat-btn-actions mat-elevation-z2"
                            matTooltip="AGREGAR"
                            [routerLink]="['action', row.id]" routerLinkActive="router-link-active" >
                                <mat-icon>add</mat-icon>
                        </button>

                        <button 
                            *ngIf="row.estado == 0"
                            mat-mini-fab 
                            color="white" 
                            class="mat-btn-actions mat-elevation-z2"
                            matTooltip="EDITAR"
                            (click)="openForm(row.id)">
                                <mat-icon>edit</mat-icon>
                        </button>
                        
                        <button 
                            *ngIf="row.estado == 0"
                            mat-mini-fab 
                            color="white" 
                            class="mat-btn-actions mat-elevation-z2"
                            matTooltip="ELIMINAR"
                            (click)="destroy(row.id)">
                                <mat-icon>delete</mat-icon>
                        </button>
                    </td>
                </ng-container>

                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>

                <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
        </table>
    </mat-card>
    
    <button
        mat-fab
        class="btn-open-form"
        (click)="openForm(0)">
        <mat-icon>add</mat-icon>
    </button>
</div>